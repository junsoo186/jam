<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jam.repository.interfaces.FundingRepository">
	
	    <!-- FUNDING_TB 테이블의 모든 데이터를 조회하는 SELECT 쿼리 -->
    <select id="selectAll" resultType="com.jam.repository.model.Funding">
        SELECT * FROM FUNDING_TB;
    </select>
    
    
      <!-- funding_id 개수를 세는 쿼리 -->
    	<select id="countFundingIdById" resultType="int">
        SELECT count(funding_id) FROM FUNDING_TB where funding_id=#{fundingId}
    </select>
      <!-- funding_id 모든개수를 세는 쿼리 -->
    	<select id="countFundingId" resultType="int">
        SELECT count(funding_id) FROM FUNDING_TB
    </select>
    
    
     <!-- FUNDING_TB 테이블에 데이터를 삽입하는 INSERT 쿼리 -->
    <insert id="insertFunding" parameterType="com.jam.repository.model.Funding">
        insert into funding_tb(user_id,reward_id) values(#{fundingId},#{rewardId}
    </insert>
    
    
    <!-- 사용자 ID에 따른 펀딩 정보 업데이트 -->
    <update id="updateFundingByUserId">
        UPDATE FUNDING_TB
        SET
            reward_id = #{funding.rewardId},
            canceled_At = #{funding.canceledAt},
            confirm_success = #{funding.confirmSuccess},
            created_at = #{funding.createdAt}
        WHERE
            user_id = #{userId}  <!-- 사용자 ID로 특정 행 선택 -->
    </update>


	<delete id="deleteFundingByUserId">
	    DELETE FROM funding_tb WHERE user_id = #{userId};
	</delete>
    
</mapper>