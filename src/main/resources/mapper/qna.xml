<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jam.repository.interfaces.QnaRepository">
	
	<!--사용자 질문 쿼리 -->
	<insert id="insertQ">
	INSERT INTO qna_tb (user_id,title,q_content,created_at) 
	VALUES(#{user_id}, #{title}, #{q_content}, now());
	</insert>
	<!--사용자가 본인 질문 수정  -->
	<update id="updateQ">
	UPDATE qna_tb SET title = #{title},
				q_content = #{q_content}
                WHERE user_id = #{user_id};
	</update>
	<!--관리자 답변 쿼리  -->
	<!-- 사용자가 insert 한 질문에 update 하여 답변 하는 형태  -->
	<update id="updateA">
	UPDATE qna_tb SET staff_id = #{staff_id},
				a_content = #{a_content}
                WHERE user_id = #{user_id};
	</update>
	
	<!--전체 Q&A 조회  --> 
	<select id="selectAllQna">
	SELECT * FROM qna_tb   LIMIT #{limit} OFFSET #{offset};
	</select>
	
	<!--사용자 본인이 남긴 Q&A 전체 조회  --> 
	<select id="selectAllQnaByUserId">
		SELECT * FROM qna_tb WHERE user_id = #{user_id} 
		LIMIT #{limit} OFFSET #{offset};
	</select>
	
	<!--사용자 본인이 남긴 Q&A 삭제  -->
	
	<delete id="deletByUserId">
	DELETE FROM qna_tb WHERE user_id = #{user_id}
	</delete>
	

</mapper>